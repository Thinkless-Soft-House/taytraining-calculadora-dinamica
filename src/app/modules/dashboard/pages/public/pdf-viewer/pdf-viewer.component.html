<div class="pdf-viewer-container">
  <!-- Header com bot√£o voltar -->
  <div class="pdf-header">
    <div class="header-content">
      <button mat-button class="back-button" (click)="voltarParaResultado()">
        <mat-icon>arrow_back</mat-icon>
        Voltar
      </button>

      <h1 class="pdf-title">
        <span class="cardapio-text">Card√°pio</span>
        <span class="personalizado-text">Personalizado</span>
      </h1>

      <button mat-raised-button color="primary" class="download-button"
              (click)="baixarPdf()"
              [disabled]="isDownloading || isLoading || hasError">
        <mat-spinner *ngIf="isDownloading" diameter="20" style="display: inline-block; margin-right: 8px;"></mat-spinner>
        <mat-icon *ngIf="!isDownloading">download</mat-icon>
        {{ isDownloading ? 'Baixando...' : 'Baixar PDF' }}
      </button>
    </div>
  </div>

  <!-- Conte√∫do principal -->
  <div class="pdf-content">
    <!-- Loading state -->
    <div *ngIf="isLoading" class="loading-container">
      <mat-spinner diameter="60"></mat-spinner>
      <p>Carregando seu card√°pio personalizado...</p>
    </div>

    <!-- Error state -->
    <div *ngIf="hasError" class="error-container">
      <div class="error-icon">‚ö†Ô∏è</div>
      <h2>Ops! Algo deu errado</h2>
      <p>{{ errorMessage }}</p>
      <div class="error-actions">
        <button mat-raised-button color="primary" (click)="voltarParaQuiz()">
          Refazer Quiz
        </button>
        <button mat-button (click)="voltarParaResultado()">
          Voltar ao Resultado
        </button>
      </div>
    </div>

    <!-- PDF Viewer -->
    <div *ngIf="!isLoading && !hasError && pdfSrc" class="pdf-viewer-wrapper">
      <pdf-viewer
        [src]="pdfSrc"
        [render-text]="true"
        [original-size]="false"
        [fit-to-page]="true"
        [zoom]="1"
        [zoom-scale]="'page-fit'"
        [show-all]="true"
        [page]="1"
        class="pdf-viewer"
        (after-load-complete)="onPdfLoadComplete()"
        (error)="onPdfError($event)">
      </pdf-viewer>
    </div>
  </div>

  <!-- Footer informativo -->
  <div class="pdf-footer" *ngIf="!isLoading && !hasError">
    <p>
      üí° <strong>Dica:</strong> Este card√°pio foi personalizado com base nas suas informa√ß√µes.
      Para melhor visualiza√ß√£o, utilize o bot√£o de download.
    </p>
  </div>
</div>
